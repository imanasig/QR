{% extends "base.html" %}

{% block title %}QR Ready - {{ member.member_id }}{% endblock %}

{% block content %}
<div class="card">
    <div style="display:flex; justify-content: space-between; align-items: center; gap: 12px;">
        <div>
            <div class="pill">QR generated</div>
            <h2 style="margin-top: 10px; font-size: 1.4rem;">Your MEA QR pass is ready</h2>
            <p class="hint">Save the QR or share the profile link. Anyone scanning will see your public card only.</p>
        </div>
        <div style="text-align:right; color:#0ea5e9; font-weight:700;">ID: {{ member.member_id }}</div>
    </div>

    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:16px; margin: 18px 0 10px;">
        <div class="card" style="box-shadow:none; border:1px solid #e2e8f0;">
            <p class="hint" style="margin-bottom:4px;">Full Name</p>
            <p style="font-weight:700; font-size:1rem;">{{ member.name }}</p>
        </div>
        <div class="card" style="box-shadow:none; border:1px solid #e2e8f0;">
            <p class="hint" style="margin-bottom:4px;">Mobile</p>
            <p style="font-weight:700; font-size:1rem;">{{ member.contact }}</p>
        </div>
        <div class="card" style="box-shadow:none; border:1px solid #e2e8f0;">
            <p class="hint" style="margin-bottom:4px;">Blood Group</p>
            <p style="font-weight:800; font-size:1.2rem; color:#dc2626;">{{ member.blood_group }}</p>
        </div>
    </div>

    <div class="qr-container">
        <img src="{{ url_for('generate_qr', member_id=member.member_id) }}" alt="QR Code">
        <div style="margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
            <a class="btn" href="{{ url_for('generate_qr', member_id=member.member_id, download=1) }}">Download QR</a>
            <a class="btn btn-secondary" href="{{ url_for('public_profile', member_id=member.member_id) }}" target="_blank">Open Public Profile</a>
        </div>
    </div>

    <p class="hint" style="text-align:center;">You can share the QR or the link. Scanning opens: {{ url_for('public_profile', member_id=member.member_id, _external=True) }}</p>

    <div style="text-align:center; margin-top:18px;">
        <a href="{{ url_for('register') }}" class="btn">Register another member</a>
    </div>
</div>
{% endblock %}
